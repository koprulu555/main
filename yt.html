<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>YouTube Player</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
        video { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>
    <video id="player" controls autoplay></video>

    <script>
        (async function() {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('id');
            
            if (!videoId) return;

            try {
                // 1. Direkt YouTube sayfasını al
                const response = await fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://www.youtube.com/watch?v=${videoId}`)}`, {
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
                        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8'
                    }
                });

                const text = await response.text();
                
                // 2. hlsManifestUrl'yi direkt ara
                const regex = /"hlsManifestUrl":"(https:\/\/[^"]+\.m3u8[^"]*)"/;
                const match = text.match(regex);
                
                if (match && match[1]) {
                    const m3u8Url = match[1].replace(/\\u0026/g, '&');
                    document.getElementById('player').src = m3u8Url;
                }

            } catch (error) {
                console.error('Error:', error);
            }
        })();
    </script>
</body>
</html>
